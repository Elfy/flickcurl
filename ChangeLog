2007-02-24  Dave Beckett  <dave@dajobe.org>

	* flickcurl.c: warning when command failed

	* config.c: (read_ini_config): Check for full length of app string
	match, not just prefix.

	* flickcurl_internal.h, photo.c,
	photos-api.c: (flickcurl_build_photo): Created from
	flickcurl_photos_getInfo() content which now uses it

	* Makefile.am, api.c, common.c, flickcurl_internal.h,
	photo.c (from common.c r185), tags.c: Copied photo routines from
	common.c to new photo.c and moved remaining api junk from api.c to
	common.c. Deleted api.c

	* Makefile.am, common.c, context.c, tags.c (from common.c r184):
	Pulled tags code out of api.c common.c into new tags.c including
	tags destructor and flickcurl_build_tags()

	* Makefile.am, api.c, common.c, context.c (from common.c r181),
	flickcurl_internal.h: Pulled contexts code out of api.c common.c
	into new context.c including flickcurl_build_contexts()

	* flickcurl.c: Added command_tags_getRelated for
	flickr.tags.getRelated

	* tags-api.c: (flickcurl_tags_getListUserRaw): Let
	flickcurl_build_tags tidy up the raw/cooked field detail.

	* common.c: (flickcurl_build_tags): Handle 
	<tag clean="cooked"><raw>raw</raw></tag> for
	flickr.tags.getListUserRaw and put @clean into the tags->cooked
	field and <raw> content into tags->raw field.

	* configure.ac: AM_CONFIG_HEADER

	* api.c, flickcurl.c, flickcurl.h, photos-api.c, triplr.c: Major
	tidy of flickcurl.h with reordering and more comments.  Pulled out
	photos and contexts fields into new structures named
	flickcurl_THING_type, renaming enums to flickcurl_THING_field_type

	* Makefile.am, flickcurl_internal.h, people-api.c, person.c (from
	api.c r176): Added person.c from api.c and pulled out
	flickcurl_build_person from people-api.c

	* api.c, auth-api.c, groups-pools-api.c, people-api.c,
	photos-api.c, photos-licenses-api.c, photosets-api.c, tags-api.c,
	test-api.c, urls-api.c: Header comments

	* photosets-api.c: add stubs

	* Makefile.am, api.c, test-api.c (from api.c r173): Added
	test-api.c from api.c

	* Makefile.am, api.c, coverage.html, photosets-api.c (from api.c
	r172): Added photosets-api.c from api.c

	* Makefile.am, api.c, groups-pools-api.c (from api.c r171): Added
	groups-pools-api.c from api.c

	* api.c, flickcurl.h, people-api.c: Added
	PERSON_FIELD_photos_views in photos

	* api.c, auth-api.c, coverage.html, flickcurl.h, people-api.c,
	photos-api.c, photos-licenses-api.c, test.c, urls-api.c: Remove
	use of setting token field into flickcurl_prepare and remove uses
	of flickcurl_set_sig_key

	* common.c: (flickcurl_free): No sig_key field
	(flickcurl_set_sig_key): Removed
	(flickcurl_set_sign): Added.
	(flickcurl_prepare): Set auth_token field here and sign either if
	it present or otherwise told to sign, if fc->sign is set.
	(flickcurl_invoke): Reset fc->sign.

	* flickcurl_internal.h: flickcurl* replaced sig_key field with
	sign flag.

	* tags-api.c: (flickcurl_tags_getRelated): Added.

	* flickcurl.c: (command_print_tags): Added Added commands for
	flickcurl_tags_getListPhoto, flickcurl_tags_getListUser,
	flickcurl_tags_getListUserPopular and
	flickcurl_tags_getListUserRaw.

	* tags-api.c: (flickcurl_tags_getListPhoto,
	flickcurl_tags_getListUser, flickcurl_tags_getListUserPopular and
	flickcurl_tags_getListUserRaw): Added.

	* flickcurl.h: Added flickcurl_tags_getListPhoto,
	flickcurl_tags_getListUser, flickcurl_tags_getListUserPopular and
	flickcurl_tags_getListUserRaw

2007-02-23  Dave Beckett  <dave@dajobe.org>

	* example.c: add tag count

	* common.c: (flickcurl_build_tags): Add count

	* flickcurl.h: struct flickcurl_tag gains count

	* flickcurl.h: Added flickcurl_tags_getListInfo

	* flickcurl.c: Added command_tags_getListInfo for tags.getListPhoto

	* photos-api.c: (flickcurl_photos_getInfo): Free xpathCtx here

	* common.c: (flickcurl_build_tags): Do not free xpathCtx here

	* Makefile.am: Added tags-api.c

	* tags-api.c: flickr.tags.*

	* flickcurl.c: (command_photos_getInfo): Handle NULL authorname

	* flickcurl.c: (command_photos_getInfo): Print authorname

	* common.c: (flickcurl_free_tag): Free authorname
	(flickcurl_build_tags): Add authorname

	* example.c: add authorname

	* flickcurl.h: struct flickcurl_tag gains authorname

	* photos-api.c: (flickcurl_photos_getInfo): Moved tags parsing to
	new flickcurl_build_tags()

	* flickcurl.h: struct flickcurl_photo replace flickcurl_tag*
	tags[20] with flickcurl_tag**

	* common.c: (flickcurl_build_tags): Added, pulled out of
	flickcurl_photos_getInfo().

	* flickcurl_internal.h: Added flickcurl_build_tags

	* Makefile.am: remove example

	* coverage.html: Link to photo upload API

	* common.c: (flickcurl_free): Only free XML data.

	* test.c: errno

	* common.c: (flickcurl_invoke): Error if capture write fails.
	Tidy URI debug message

	* test.c: low-level api test

	* Makefile.am: example and test are extra

	* example.c: tidy

	* flickcurl.c: Added new commands and helper functions for
	flickcurl_auth_checkToken, flickcurl_auth_getFrob,
	flickcurl_auth_getToken and flickcurl_auth_getFullToken Moved
	initializing earlier so that '-a' can work again.

2007-02-22  Dave Beckett  <dave@dajobe.org>

	* common.c: (flickcurl_free): Tidy data, data_length and
	data_is_xml fields.
	(flickcurl_prepare): Init to read-only, no content data.
	(flickcurl_invoke): Add Content-Type: application/xml header when
	sending data.  Use POST when write flag is set.  Handle non XML
	responses failing gracefully
	(flickcurl_set_write, flickcurl_set_data, flickcurl_set_xml_data):
	Added.

	* flickcurl_internal.h: Added is_write, data, data_length and
	data_is_xml fields to flickcurl*

	* auth-api.c: (flickcurl_auth_checkToken, flickcurl_auth_getFrob
	and flickcurl_auth_getToken): Added, completing the flickr.auth.*
	API calls.

	* flickcurl.h: Added flickcurl_set_write, flickcurl_set_data,
	flickcurl_set_xml_data Added auth API calls:
	flickcurl_auth_checkToken, flickcurl_auth_getFrob and
	flickcurl_auth_getToken

	* coverage.html: 0.9

2007-02-20  Dave Beckett  <dave@dajobe.org>

	* Snapshotted flickcurl_0_8 for 0.8 release (SVN 122)

	* example.c: Add init, finish

	* coverage.html: Now with changes

	* NEWS: NEWS now generated

	* common.c: (flickcurl_new): 1000ms default delay

2007-02-19  Dave Beckett  <dave@dajobe.org>

	* triplr.c: (emit_triple): Casts for raptor_free_uri

	* flickcurl.c, triplr.c: Use flickcurl_init/flickcurl_finish to
	ensure all of curl/libxml is initialised and cleaned up as far as
	is possible

	* flickcurl.h: Added flickcurl_init

	* common.c: (flickcurl_init): Added.

	* flickcurl.c: (main): Call flickcurl_finish

	* flickcurl.h: Added flickcurl_finish prototype.

	* common.c: (flickcurl_finish): Added.

	* photos-api.c: (flickcurl_photos_getInfo): return NULL on error

	* flickcurl.c: (main): Init fc and ensure it is freed on help/usage.

	* photos-licenses-api.c: free attribute strings that are atoi()ed

	* photos-api.c: free attribute strings that are atoi()ed

	* common.c: free attribute strings that are atoi()ed

	* triplr.c: (emit_triple): Free uris properly.
	(main): Init fc and ensure it is freed on help/usage.

	* triplr.c: help to stdout

	* Makefile.am, api.c, photos-licenses-api.c (renamed from
	api.c r95): Pull photos.licenses API out of api.c into
	photos-licenses-api.c

	* api.c, auth-api.c, people-api.c, photos-api.c, urls-api.c: autodocs

	* Makefile.am, api.c, photos-api.c (renamed from api.c r90): Pull
	photos API out of api.c into photos-api.c

	* common.c: common.c

	* Makefile.am, common.c (renamed from core.c r90), core.c: Rename
	core.c to common.c - files named core* are a bad idea

	* flickcurl.c: Rename commands to match API names
	Allow old foo-bar commands to work
	Allow flickr.COMMAND to work

2007-02-18  Dave Beckett  <dave@dajobe.org>

	* triplr.c: Extend help when raptor is present

	* people-api.c: (flickcurl_get_nsid): Added with common code from
	flickcurl_people_findByEmail, flickcurl_people_findByUsername.
	(flickcurl_people_findByEmail, flickcurl_people_findByUsername):
	Updated to use flickcurl_get_nsid.

	* flickcurl.c: Added commands to call flickcurl_people_findByEmail
	and flickcurl_people_findByUsername

	* people-api.c: (flickcurl_people_findByEmail,
	flickcurl_people_findByUsername): Added.

	* flickcurl.h: Added
	char* flickcurl_people_findByEmail(flickcurl* fc, const char* email);
	char* flickcurl_people_findByUsername(flickcurl* fc, const char* username);

	* core.c, flickcurl_internal.h: Fix offline/capture defines

	* core.c: use errno.h

	* configure.ac, core.c, flickcurl_internal.h: Added
	--enable-offline and --enable-capture to configure rather than
	editing a header file

	* api.c, auth-api.c, core.c, flickcurl_internal.h, people-api.c,
	urls-api.c: More comprehensive offline and XML capture

	* Makefile.am, api.c, urls-api.c (from /trunk/api.c:67): Copy urls
	apis from api.c urls-api.c

	* people-api.c: Move person_fields_table from api.c

	* Makefile.am, api.c, people-api.c (from /trunk/api.c:62): Move
	people calls from api.c to people-api.c

	* auth-api.c: remove offline define

	* Makefile.am, flickcurl.c (from /trunk/main.c:57), main.c: Rename
	main.c to flickcurl.c

	* Makefile.am, core.c (from /trunk/flickcurl.c:61), flickcurl.c:
	Rename flickcurl.c to core.c

	* Makefile.am, api.c, auth-api.c (from /trunk/api.c:51),
	flickcurl_internal.h: Move auth calls from api.c to auth-api.c

	* flickcurl.c: (flickcurl_new): Default to 100ms min delay between
	requests.

	* configure.ac: Remove  -Wmissing-format-attribute
	Which is too annoying to fix right now.

	* flickcurl.c: ifdef not if

	* flickcurl.c: (flickcurl_invoke): Wrap debug messages with ifdefs

	* main.c: Added -d/--delay DELAY to set request delay

	* triplr.c: Debug is now -D/--delay
	-d/--delay DELAY to set request delay

	* flickcurl.c: (flickcurl_set_request_delay): Added to set the
	inter-request minimum delay.
	(flickcurl_invoke): Use gettimeofday and nanosleep to enforce the
	minimum delay between requests.

	* flickcurl.h: Added flickcurl_set_request_delay

	* flickcurl_internal.h: flickcurl gains last_request_time and
	request_delay fields

	* flickcurl.c: Fix home page url

	* configure.ac: Bumped version to 0.8

	* Snapshotted flickcurl_0_7 for 0.7 release (SVN 48)

2007-02-17  Dave Beckett  <dave@dajobe.org>

	* main.c: (command_contexts_print): Added helper
	(command_groups_pools_getContext): Added, calling
	flickcurl_groups_pools_getContext.
	(command_photos_getAllContexts): Added, calling
	flickcurl_photos_getAllContexts.
	(command_photos_getContext): Added, calling
	flickcurl_photos_getContext.
	(command_photosets_getContext): Added, calling
	flickcurl_photosets_getContext

	* api.c: (flickcurl_get_context_type_field_label): Added helper
	(flickcurl_groups_pools_getContext,
	flickcurl_photos_getAllContexts, flickcurl_photos_getContext,
	flickcurl_photosets_getContext): Added API calls.

	* flickcurl.c: (flickcurl_free_context, flickcurl_free_contexts,
	flickcurl_build_contexts): Added

	* flickcurl.h: Added flickcurl_context_type enum,
	flickcurl_context typedef Added
	flickcurl_get_context_type_field_label,
	flickcurl_groups_pools_getContext,
	flickcurl_photos_getAllContexts, flickcurl_photos_getContext,
	flickcurl_photosets_getContext, API calls.  Added
	flickcurl_free_context and flickcurl_free_contexts

	* flickcurl_internal.h: Added flickcurl_context_type_element,
	flickcurl_build_contexts

2007-02-11  Dave Beckett  <dave@dajobe.org>

	* README.html: dc:rights example

	* NEWS, README.html, configure.ac: Bumped to 0.7

	* coverage.html: annoate version it appeared

	* Makefile.am, README.html, coverage.html: Added coverage doc

	* configure.ac: AC_INIT tweak

2007-02-11  Dave Beckett  <dave@dajobe.org>

	* Snapshotted flickcurl_0_6 for 0.6 release (SVN 31)

	* Makefile.am, README.html, coverage.html: Added coverage doc

	* configure.ac: AC_INIT tweak

2007-02-05  Dave Beckett  <dave@dajobe.org>

	* README.html: Added flickcurl_urls_lookupUser

	* main.c; Added command_urls_lookupUser and urls-lookupUser command

	* flickcurl.h: Added flickcurl_urls_lookupUser

	* api.c: (flickcurl_urls_lookupUser): Added

2007-02-04  Dave Beckett  <dave@dajobe.org>
	* api.c: online

	* triplr.c: When a photo license field is found, look up the license
	URI with flickcurl_photos_licenses_getInfo_by_id()

	* main.c: Added command_people_getInfo,
	command_photos_licenses_getInfo and corresponding as
	people-getInfo and photos-licenses-getInfo

	* flickcurl.c (flickcurl_free): Tidy licenses found.
	(flickcurl_free_person): Added.

	* api.c: (flickcurl_photos_getInfo): auth_token is optional.
	(flickcurl_get_person_field_label, flickcurl_people_getInfo,
	flickcurl_photos_licenses_getInfo,
	flickcurl_photos_licenses_getInfo_by_id, flickcurl_free_person):
	Added
	(compare_licenses, flickcurl_read_licenses): Added to implement
	flickcurl_photos_licenses_getInfo() and
	flickcurl_photos_licenses_getInfo_by_id().

	* flickcurl.h: Added VALUE_TYPE_PERSON_ID
	Added flickcurl_license, flickcurl_person_field, flickcurl_person
	Added:
	const char* flickcurl_get_person_field_label(flickcurl_person_field field);
	flickcurl_person* flickcurl_people_getInfo(flickcurl* fc, const char* user_id);
	flickcurl_license** flickcurl_photos_licenses_getInfo(flickcurl *fc);
	flickcurl_license* flickcurl_photos_licenses_getInfo_by_id(flickcurl *fc, int id);
	void flickcurl_free_person(flickcurl_person *person);

	* flickcurl_internal.h: Added licenses to struct flickcurl_s

	* configure.ac: 0.6

	* Imported flickcurl 0.1 - 0.5 from tarballs
